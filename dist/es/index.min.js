import e from"axios";function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?t(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,r){return(t=u(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function c(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,s(e,t,"get"))}function l(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,s(e,t,"set"),r),r}function s(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function f(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function h(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(e,t,r){h(e,t),t.set(e,r)}var p=new WeakMap,d=new WeakSet,b=function(){function e(){var t,r;n(this,e),h(t=this,r=d),r.add(t),v(this,p,{writable:!0,value:void 0}),l(this,p,new Map)}return i(e,[{key:"add",value:function(e){var t=f(this,d,g).call(this,e),r=new AbortController;c(this,p).has(t)&&c(this,p).get(t).abort(),e.signal=r.signal,c(this,p).set(t,r)}},{key:"remove",value:function(e){var t=f(this,d,g).call(this,e);c(this,p).has(t)&&c(this,p).delete(t)}},{key:"clear",value:function(){var e=this;c(this,p).forEach((function(t,r){t.abort(),c(e,p).delete(r)}))}}]),e}();function g(e){var t=e.method,r=e.baseURL,n=e.url;return"".concat(t.toLocaleLowerCase(),".").concat(r).concat(n)}function y(e){return function(e,t){return Object.prototype.toString.call(e).slice(8,-1)===t}(e,"Function")}var w=new WeakMap,m=new WeakMap,O=function(){function t(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t),v(this,w,{writable:!0,value:void 0}),v(this,m,{writable:!0,value:void 0});var i=o.enableAbortController,a=o.interceptorRequest,u=o.interceptorRequestCatch,s=o.interceptorResponse,f=o.interceptorResponseCatch;l(this,w,r({},o)),l(this,m,e.create(c(this,w)));var h=new b;c(this,m).interceptors.request.use((function(e){return i&&!1!==e.enableAbortController&&h.add(e),y(a)&&a(e),e}),(function(e){return y(u)&&u(e),Promise.reject(e)})),c(this,m).interceptors.response.use((function(e){return h.remove(e.config),y(s)&&s(e,h),"10000"===e.data.code?e.data:e}),(function(e){return y(f)&&f(e),Promise.reject(e)}))}return i(t,[{key:"store",get:function(){return c(this,m)}},{key:"request",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n,o){c(e,m).request(r({},t)).then((function(e){n(e.data)}),(function(e){o(e)})).catch((function(e){o(e)}))}))}},{key:"post",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request(r({method:"post",url:e,data:t},n))}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request(r({method:"get",url:e,params:t},n))}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request(r({method:"delete",url:e,data:t},n))}},{key:"put",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request(r({method:"put",url:e,data:t},n))}},{key:"upload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.post(e,t,r({headers:{"Content-Type":"multipart/form-data"}},n))}},{key:"download",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request(r({url:e,baseURL:"",method:"get",responseType:"blob"},t))}}]),t}();export{O as default};
